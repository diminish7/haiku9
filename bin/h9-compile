#!/usr/bin/env coffee --nodejs --harmony
{call} = require "fairmont"
options = require "commander"
{compile, clean} = require "../src/compile"

{source, target, watch} = options
  .version "1.0.0-alpha-01"
  .option "-t ,--target <path>", "Directory to compile into [build]"
  .option "-s, --source <path>", "Directory to compile from [public]"
  .option "-w, --watch", "Watch for changes and recompile [false]"
  .parse process.argv

source ?= "public"
target ?= "build"
watch ?= false
recursive = true

call ->
  yield clean target
  yield compile {source, target, recursive, watching: watch}
